<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script>
    // This script captures the current URL path and redirects to the home page with the path encoded in query parameters
    const pathSegmentsToKeep = 1; // Set to 1 if your repo is a project page
    
    const l = window.location;
    const origin = l.origin || (l.protocol + '//' + l.host);
    
    // Encode the path after the domain name
    let path = l.pathname.split('/').slice(pathSegmentsToKeep + 1).join('/');
    if (path && path.length > 0) {
      // Replace & with ~and~ to handle it as a single query parameter
      path = path.replace(/&/g, '~and~');
      
      // Redirect to the index page with the path encoded in the query string
      l.href = origin + (pathSegmentsToKeep === 1 ? '/' + l.pathname.split('/')[1] : '') + 
        '/?/' + path + (l.search ? '&' + l.search.slice(1) : '') + l.hash;
    }
  </script>
</head>
<body>
  <p>Redirecting to home page...</p>
</body>
</html>